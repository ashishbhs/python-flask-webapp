import net.sourceforge.tess4j.ITesseract;
import net.sourceforge.tess4j.Tesseract;
import net.sourceforge.tess4j.TesseractException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.rendering.PDFRenderer;

import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;

public class PDFOCRExtractor {
    public static void main(String[] args) {
        String pdfPath = "filled_form.pdf"; // your PDF file
        String tessDataPath = "tessdata";   // path to tessdata folder

        try (PDDocument document = PDDocument.load(new File(pdfPath))) {
            PDFRenderer renderer = new PDFRenderer(document);
            ITesseract tesseract = new Tesseract();
            tesseract.setDatapath(tessDataPath); // path to traineddata files
            tesseract.setLanguage("eng");

            for (int page = 0; page < document.getNumberOfPages(); page++) {
                BufferedImage image = renderer.renderImageWithDPI(page, 300); // high-res for better OCR
                // Optional: Save image for inspection
                // ImageIO.write(image, "png", new File("page_" + page + ".png"));

                System.out.println("----- Page " + (page + 1) + " -----");
                String result = tesseract.doOCR(image);
                System.out.println(result);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
